<!docType HTML>
<html>
<head>
<link rel='stylesheet' type='text/css' href='yolpo.css'>
</head>
<body>
<textarea id='taCode' spellcheck=false style='position:absolute;resize:none;width:100%;height:100%;white-space:pre;word-wrap:normal;top:0;left:0;right:0;bottom:0;margin:0;border:0;padding:0;outline:0;font-size:13px;font-family:monospace;'></textarea>
<script>
var oldValue = sessionStorage.getItem('code'); 
var taCode = document.getElementById('taCode');
taCode.value = (oldValue == null) ? '' : oldValue;

window.onunload = function() {
	sessionStorage.setItem('code', taCode.value); 
}


//
// Queuing the updates until the editing settles. 
//
var timeOnLastChange = 0; 
	
function monitor() {
    var value = taCode.value;
    if (value != oldValue) {
	    timeOnLastChange = +new Date();
	    oldValue = value;
	} else if (timeOnLastChange != 0 && (+new Date() - timeOnLastChange > 400)) { 
    	timeOnLastChange = 0;                                         
	    window.parent.right.postMessage(value,'*');  
    }
    setTimeout(monitor,150); 
}
monitor();
</script>
</body>
</html>